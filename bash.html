<!DOCTYPE html>
<html>
	<title>Bash Programming</title>
	
	<head>
		<style type="text/css">
			div.hidden {
				display: none;
			}
			.bashcommand {
				font-family: Courier;
				font-size: 12px;
			}
		</style>
		
		<script language="javascript">
			function showContent(num){
				var x = document.getElementById("content".concat(num)).style;
				if (x.display=="none" || x.display==""){
					x.display="block";
				}
				else{
					x.display="none";
				}
				return false;
			}
		</script>
	</head>
	
	<body>
		<h1>Bash programming</h1>
		<h2>Tutorial content</h2>
		
		<h3><a href="#content1" onclick="showContent(1);">1. Introduction to shell scripting</a></h3>
		<div id="content1" class="hidden">
			<p>
			<b>Shell (bash) scripting, its benefits and dangers (and how to protect from them)</b>
			</p>
			
			<p>
			Shell is a program that users employ to run commands for the operating system to execute. These can be very simple 
			instructions such as coping or moving files, or long scripts that contain hundreds of commands. Users typically 
			interact with a shell using a terminal window (also referred to as command line), which can be run from the same or 
			a remote machine. There are different types of shells, but I will refer in this tutorial only to the Bourne-Again shell, 
			which is the most commonly used. The Bourne-Again shell (or simply shell, as most people call it) is installed by 
			default in any Linux or MacOS. The programming language used to write commands and scripts in shell is called bash.
			</p>

			<p>
			The terminal window for Mac can be found inside the applications folder and in the subfolder Utilities. You can also 
			open it by pressing the command and space bar in your keyboard to open the spotlight and then type Terminal. 
			In Linux, the easiest way to open the terminal is to use the key combination Ctl + Alt + T.
			</p>

			<p>
			Shell scripting is very powerful; it allows you to run any instruction on your computer or a remote machine. Things 
			that normally would take hours to do could be executed in seconds. For example, if you have thousands of files 
			inside a folder, which need to be renamed following a pattern, it would take forever to rename those files by hand. 
			However, using the command line you could do it in seconds. When you write a shell script, you know exactly what and 
			how you did things, and you will be able to replicate those commands on different files, datasets or programs.
			</p>

			<p>			
			However, as powerful as scripting is, it is also very dangerous. Through the terminal you will have access to any 
			files or system resources if you have the right permissions, and the freedom to do anything with them. Inadvertent 
			"small" typing errors such as adding an extra space in the remove command (<font class="bashcommand">rm</font>) could delete everything in your 
			computer (including the root directory) or any external drive connected to your machine. Similarly, the contents of 
			any file could be mistakenly removed in less than a second. What makes it harder to prevent these errors is that 
			many commands differ in name by only one letter.
			</p>

			<p>
			Unfortunately, there is no way to completely protect your computer from potential mistakes that you may (and you 
			will at some point) do when writing and running shell scripts. However, there are a couple of tips that you can 
			follow in order to minimize the chances of making irreparable mistakes or to prevent any mistake from becoming a 
			catastrophe:
			</p>	

			<ol>
				<li>
				First and most importantly, create constant backups of either your entire drive or the most important folders. 
				Preferably save those backups in an external hard drive or remote machine, which won't be constantly connected 
				to your computer. It is not a bad idea to have more than one backup if your data is not easily recoverable.
				</li><br>

				<li>
				If you're using a shared computer or account, control access permissions to important files and folders. You can 
				control for each file and folder who and what can be done. By managing permissions, you can allow a file to be 
				read but not to be written (hence preventing it from being modified or deleted). Or you can authorize only a 
				user or group of users for viewing, reading, writing or executing a file. In chapter 12 you will learn how to 
				manage permissions.
				</li><br>

				<li>
				The root user is an account in any Linux or Unix operating system (i.e. MacOS) that has access to absolutely all 
				commands, files and directories. When you login as a root in the command line, you can modify, read and write 
				protected folders and files. This is very helpful when installing software or modifying the default settings of 
				your computer. However, coding as the root user can be extremely dangerous. It is very normal to make mistakes 
				when coding and if you have all permissions, you could mistakenly delete, move or modify files that should not 
				be touched. For this reason, it is advisable to only login as a root when strictly necessary and log out once 
				you're done. More information about the root user will be covered in chapter 12.
				</li><br>

				<li>
				Use aliases to protect from "dangerous" commands. Two of the most commonly used but dangerous commands are 
				<font class="bashcommand">rm</font> (to remove files) and <font class="bashcommand">mv</font> (to move files). 
				The <font class="bashcommand">mv</font> command can be as harmful as the <font class="bashcommand">rm</font> 
				command because if you specify the wrong target or source paths, you can end up deleting a big number of files. 
				When you use any of these two commands, always double check what you have written before clicking enter.
				</li><br>

				<li>
				Be careful when copy pasting commands from a website into the terminal. There can be errors that will be 
				executed right away if the text you're copying contains a carriage return at the end of the line. It is better 
				to paste into a shell script and then either execute the shell script or copy from the shell script into the 
				command line. Although generally not dangerous, you might also run into errors when copy pasting from Microsoft 
				word or other editors that modify symbols such as dash or underscore and convert them into new symbols that 
				bash won't understand.
				</li>

			</ol>
		</div>
		
		<h3><a href="#content2" onclick="showContent(2);">2. Creating simple bash scripts</a></h3>
		<div id="content2" class="hidden">
			<h4><a href="#content2.1" onclick="showContent(2.1)">2.1. The vi editor</a></h4>
			<div id="content2.1" class="hidden">
				<p>
				There are an unlimited number of editors available for writing shell scripts in Linux and Mac. A few are 
				installed by default; some are used through the terminal and some others use a graphical interface (GUI). 
				They all have pros and cons and the decision to use one or another is totally personal. In this section I will 
				explain how to use the editor vi, which is installed by default in both Linux and MacOS and can be accessed and 
				used through the terminal window. 
				</p>
				
				These are some of the advantages of vi:
				<ul>
					<li>
					It is available in all Unix systems and any type of terminal.
					</li>
					
					<li>
					It doesn't require a lot of memory to run. So, if you are running many heavy programs in your computer, 
					vi is a good option because it won't slow down the machine anymore and will still load very fast.
					</li>
					
					<li>
					Even though there are a lot of commands that you must learn to become skilled in using this program, once 
					you learn them you can use very short and fast commands to accomplish a lot of things. For example, you 
					can delete all the characters from your current cursor location to the end of the line, just by pressing two 
					times the d in your keyboard (while in command mode). Below you will find a chart with the most commonly used 
					shortcuts in vi.
					</li>
					
					<li>
					You can use it to code in different languages (i.e. it also works for Python, HTML, etc.).
					</li>
					
					<li>
					If you don't like using your mouse too much, or you don't have a mouse, or your mouse doesn't work 
					properly, then vi editor is a good choice because you rarely need to use the mouse. Most things are 
					accomplished using the keyboard.
					</li>
				</ul>
				
				However, there are some disadvantages too:
				<ul>
					<li>
					The learning curve can be steep, especially for people who are new to programming and not very comfortable 
					with computers. If you're new to bash, you not only need to learn the language, but also a whole set of 
					commands specific to this program. 
					</li>
					
					<li>
					Not being able to use your mouse can end up wasting your time while you learn all the commands that are used 
					to scroll around the file or jump from one line to another.
					</li>
					
					<li>
					It doesn't give you any error messages or explanation of why it's not doing what you want. If you type the 
					wrong command, it will just do nothing (or do the wrong thing).
					</li>
				</ul>
				
				<p>
				Generally, many people with relatively good experience programming love this editor. In my opinion, it's a good 
				tool to use once you are familiar with shell and have been programming for a while. However, it might be a great 
				option for you if you like challenges or if you are already somehow familiar with shell.
				</p>
				
				<p>
				To create a new file, type (on the command line) 
				<font class="bashcommand">vi &lt;filePath&gt;/&lt;filename&gt;</font>. For example, if you want to create a file 
				called test.sh in the desktop, you should type <font class="bashcommand">vi ~/Desktop/test.sh</font>. The vi 
				editor will open in the current terminal.
				</p>
			</div>
			
			<h4><a href="#content2.2" onclick="showContent(2.2)">2.2. Other editors</a></h4>
			<div id="content2.2" class="hidden">
				other editors content
			</div>
			
			<h4><a href="#content2.3" onclick="showContent(2.3)">2.3. Tips for writing scripts</a></h4>
			<div id="content2.3" class="hidden">
				tips content
			</div>
			
			<h4><a href="#content2.4" onclick="showContent(2.4)">2.4. Running a script</a></h4>
			<div id="content2.4" class="hidden">
				running script content
			</div>
		</div>
		
		<p>
		Last update: February 14 / 2020<br>
		All the content from this tutorial was originally created by the author<br>
		Author: <a href="http://www.neuro.mcw.edu/index.php/people/monica-giraldo-chica-keith-phd/" target="_blank">Monica Keith</a>
		</p>
	</body>
</html>